{"remainingRequest":"D:\\桌面\\tourism\\front-end\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\tourism\\front-end\\front-end\\src\\pages\\LvYouTuanInfor\\page.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面\\tourism\\front-end\\front-end\\src\\pages\\LvYouTuanInfor\\page.vue","mtime":1618831514764},{"path":"D:\\桌面\\tourism\\front-end\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\tourism\\front-end\\front-end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\tourism\\front-end\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\桌面\\tourism\\front-end\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\tourism\\front-end\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { regionData } from \"element-china-area-data\";\r\nimport { CodeToText } from \"element-china-area-data\";\r\nexport default {\r\n  data() {\r\n    return {\r\n     \r\n      options: regionData,\r\n      selectedOptions: [],\r\n      selectedOptions2: [],\r\n     \r\n      teamInfor:{\r\n        introduce:\"\",\r\n        fileList: [],\r\n        price:0,\r\n        departure:\"\",\r\n        destination:\"\",\r\n         buZhou:[\"\"],\r\n         provider:\"\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    send(){\r\n      if(this.teamInfor.introduce.length == 0 || this.teamInfor.fileList.length ==0 || this.teamInfor.price <=0|| this.teamInfor.departure.length<=0|| this.teamInfor.destination.length ==0 || this.teamInfor.buZhou.length ==0 || this.teamInfor.provider.length ==0){\r\n        this.$message.error(\"输入框为空或格式错误\")\r\n        return;\r\n      }\r\n      let teamInfor = JSON.stringify(this.teamInfor)\r\n      this.axios.post(this.$root.team+\"uploadTeamInfor\",{\r\n         introduce:this.teamInfor.introduce,\r\n        fileList: this.teamInfor.fileList,\r\n        price:this.teamInfor.price,\r\n        departure: this.teamInfor.departure,\r\n        destination: this.teamInfor.destination,\r\n         buZhou: this.teamInfor.buZhou,\r\n         provider: this.teamInfor.provider\r\n      })\r\n      .then(res => {\r\n        if(res.data){\r\n           this.$message({\r\n          message: '发布成功',\r\n          type: 'success'\r\n        });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(err); \r\n      })\r\n    },\r\n    handleRemove(file, fileList) {\r\n      console.log(file, fileList);\r\n    },\r\n    handlePreview(file) {\r\n      console.log(file);\r\n    },\r\n    handleAvatarSuccess(res, file) {\r\n      console.log(this.teamInfor.fileList.push(res));\r\n    },\r\n    beforeAvatarUpload() {\r\n      if (this.teamInfor.fileList.length >= 3) {\r\n        console.log(this.teamInfor.fileList.length + \"length-------\");\r\n        this.$message.error(\"只能上传三张图片\");\r\n        return false;\r\n      }\r\n    },\r\n    handleChange1(value) {\r\n      console.log(value);\r\n      this.teamInfor.departure = CodeToText[value[0]]+\"-\"+CodeToText[value[1]]+\"-\"+CodeToText[value[2]]\r\n    },\r\n     handleChange2(value) {\r\n      console.log(value);\r\n      this.teamInfor.destination = CodeToText[value[0]]+\"-\"+CodeToText[value[1]]+\"-\"+CodeToText[value[2]]\r\n    },\r\n    addBu(){\r\n      \r\n        if(this.teamInfor.buZhou.length>=7){\r\n            this.$message.error(\"步骤最多为7条\");\r\n        }else{\r\n            this.teamInfor.buZhou.push(\"\")\r\n        }\r\n       \r\n        \r\n    }\r\n  },\r\n};\r\n",{"version":3,"sources":["page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"page.vue","sourceRoot":"src/pages/LvYouTuanInfor","sourcesContent":["<template>\r\n  <div class=\"lvYouTuanInfor\">\r\n    <h2>旅游团信息发布</h2>\r\n    <label>\r\n      标题:\r\n      <el-input v-model=\"teamInfor.introduce\" maxlength=\"50\"></el-input>\r\n      商品图片:\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        action=\"http://localhost:81/upload\"\r\n        :on-remove=\"handleRemove\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n        list-type=\"picture\"\r\n      >\r\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n        <div slot=\"tip\" class=\"el-upload__tip\">\r\n          只能上传jpg/png文件，且不超过500kb\r\n        </div>\r\n      </el-upload>\r\n    </label>\r\n    <label>\r\n      价格:\r\n      <el-input-number v-model=\"teamInfor.price\"></el-input-number>\r\n    </label>\r\n    <br>\r\n    <br>\r\n    <div>\r\n       <label>\r\n      出发地:\r\n      <el-cascader\r\n        size=\"large\"\r\n        :options=\"options\"\r\n        v-model=\"selectedOptions\"\r\n        @change=\"handleChange1\"\r\n      >\r\n      </el-cascader>\r\n    </label>\r\n     <label>\r\n      目的地:\r\n      <el-cascader\r\n        size=\"large\"\r\n        :options=\"options\"\r\n        v-model=\"selectedOptions2\"\r\n        @change=\"handleChange2\"\r\n      >\r\n      </el-cascader>\r\n    </label>\r\n    </div>\r\n   \r\n    <br>\r\n    <br>\r\n    <label>\r\n        路径介绍:\r\n      <el-steps direction=\"vertical\">\r\n          <label v-for=\"(item,index) in teamInfor.buZhou\" :key=\"index\" >\r\n               <el-step :title=\"'步骤'+(index+1)\"  :description=\"teamInfor.buZhou[index]\"></el-step>\r\n               <el-input type=\"text\" v-model=\"teamInfor.buZhou[index]\" @keyup.enter.native=\"addBu\"></el-input>\r\n          </label>\r\n      </el-steps>\r\n    </label>\r\n    <hr>\r\n    <label>\r\n        旅游提供商:\r\n        <el-input v-model=\"teamInfor.provider\" maxlength=\"50\"></el-input>\r\n    </label>\r\n    <el-button type=\"success\" @click=\"send\">\r\n        提交\r\n    </el-button>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { regionData } from \"element-china-area-data\";\r\nimport { CodeToText } from \"element-china-area-data\";\r\nexport default {\r\n  data() {\r\n    return {\r\n     \r\n      options: regionData,\r\n      selectedOptions: [],\r\n      selectedOptions2: [],\r\n     \r\n      teamInfor:{\r\n        introduce:\"\",\r\n        fileList: [],\r\n        price:0,\r\n        departure:\"\",\r\n        destination:\"\",\r\n         buZhou:[\"\"],\r\n         provider:\"\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    send(){\r\n      if(this.teamInfor.introduce.length == 0 || this.teamInfor.fileList.length ==0 || this.teamInfor.price <=0|| this.teamInfor.departure.length<=0|| this.teamInfor.destination.length ==0 || this.teamInfor.buZhou.length ==0 || this.teamInfor.provider.length ==0){\r\n        this.$message.error(\"输入框为空或格式错误\")\r\n        return;\r\n      }\r\n      let teamInfor = JSON.stringify(this.teamInfor)\r\n      this.axios.post(this.$root.team+\"uploadTeamInfor\",{\r\n         introduce:this.teamInfor.introduce,\r\n        fileList: this.teamInfor.fileList,\r\n        price:this.teamInfor.price,\r\n        departure: this.teamInfor.departure,\r\n        destination: this.teamInfor.destination,\r\n         buZhou: this.teamInfor.buZhou,\r\n         provider: this.teamInfor.provider\r\n      })\r\n      .then(res => {\r\n        if(res.data){\r\n           this.$message({\r\n          message: '发布成功',\r\n          type: 'success'\r\n        });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(err); \r\n      })\r\n    },\r\n    handleRemove(file, fileList) {\r\n      console.log(file, fileList);\r\n    },\r\n    handlePreview(file) {\r\n      console.log(file);\r\n    },\r\n    handleAvatarSuccess(res, file) {\r\n      console.log(this.teamInfor.fileList.push(res));\r\n    },\r\n    beforeAvatarUpload() {\r\n      if (this.teamInfor.fileList.length >= 3) {\r\n        console.log(this.teamInfor.fileList.length + \"length-------\");\r\n        this.$message.error(\"只能上传三张图片\");\r\n        return false;\r\n      }\r\n    },\r\n    handleChange1(value) {\r\n      console.log(value);\r\n      this.teamInfor.departure = CodeToText[value[0]]+\"-\"+CodeToText[value[1]]+\"-\"+CodeToText[value[2]]\r\n    },\r\n     handleChange2(value) {\r\n      console.log(value);\r\n      this.teamInfor.destination = CodeToText[value[0]]+\"-\"+CodeToText[value[1]]+\"-\"+CodeToText[value[2]]\r\n    },\r\n    addBu(){\r\n      \r\n        if(this.teamInfor.buZhou.length>=7){\r\n            this.$message.error(\"步骤最多为7条\");\r\n        }else{\r\n            this.teamInfor.buZhou.push(\"\")\r\n        }\r\n       \r\n        \r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.lvYouTuanInfor {\r\n  padding: 20px;\r\n}\r\n</style>"]}]}