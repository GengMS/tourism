{"remainingRequest":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\babel-loader\\lib\\index.js!E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\设计案例\\tourism\\front-end\\front-end(web)\\src\\components\\DongTai\\page.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\src\\components\\DongTai\\page.vue","mtime":1619485541778},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\.babelrc","mtime":1617256139254},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      dialogImageUrl: \"\",\n      dialogVisible: false,\n      textarea: \"\",\n      imageUrl: \"\",\n      imgList: [],\n      sight: \"\"\n    };\n  },\n  methods: {\n    cancel: function cancel() {\n      this.$parent.dongTaiShow = false;\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      console.log(res);\n      this.imgList.push(res);\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === \"image/jpeg\";\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n      }\n\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n\n      if (this.imgList.length >= 4) {\n        console.log(\"sdsf\");\n        this.$message.error(\"上传图片数已达上限\");\n        return false;\n      }\n\n      return isJPG && isLt2M;\n    },\n    send: function send() {\n      var _this = this;\n\n      if (this.textarea.length == 0) {\n        this.$message.error(\"标题不能为空呦\");\n      } else {\n        this.axios.post(this.$root.dong_tai + \"dong/upload\", {\n          type: 0,\n          uId: parseInt(this.$cookies.get(\"uId\")),\n          title: this.textarea,\n          imgList: this.imgList,\n          sight: this.sight\n        }).then(function (res) {\n          if (res.data) {\n            _this.$message({\n              message: \"提交成功\",\n              type: \"success\"\n            });\n\n            _this.cancel();\n          } else {\n            _this.$message.error(\"提交错误\");\n          }\n        }).catch(function (err) {\n          console.error(err);\n        });\n      }\n    },\n    delImg: function delImg(index) {\n      this.imgList.splice(index, 1);\n    }\n  }\n};",{"version":3,"sources":["page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,sBAAA,EADA;AAEA,qBAAA,KAFA;AAGA,gBAAA,EAHA;AAIA,gBAAA,EAJA;AAKA,eAAA,EALA;AAMA,aAAA;AANA,KAAA;AAQA,GAVA;AAWA,WAAA;AACA,UADA,oBACA;AACA,WAAA,OAAA,CAAA,WAAA,GAAA,KAAA;AACA,KAHA;AAIA,uBAJA,+BAIA,GAJA,EAIA,IAJA,EAIA;AACA,cAAA,GAAA,CAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,KAPA;AAQA,sBARA,8BAQA,IARA,EAQA;AACA,UAAA,QAAA,KAAA,IAAA,KAAA,YAAA;AACA,UAAA,SAAA,KAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,CAAA;;AAEA,UAAA,CAAA,KAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mBAAA;AACA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mBAAA;AACA;;AACA,UAAA,KAAA,OAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,gBAAA,GAAA,CAAA,MAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,WAAA;AACA,eAAA,KAAA;AACA;;AACA,aAAA,SAAA,MAAA;AACA,KAxBA;AAyBA,QAzBA,kBAyBA;AAAA;;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,SAAA;AACA,OAFA,MAEA;AACA,aAAA,KAAA,CACA,IADA,CACA,KAAA,KAAA,CAAA,QAAA,GAAA,aADA,EACA;AACA,gBAAA,CADA;AAEA,eAAA,SAAA,KAAA,QAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAFA;AAGA,iBAAA,KAAA,QAHA;AAIA,mBAAA,KAAA,OAJA;AAKA,iBAAA,KAAA;AALA,SADA,EAQA,IARA,CAQA,UAAA,GAAA,EAAA;AACA,cAAA,IAAA,IAAA,EAAA;AACA,kBAAA,QAAA,CAAA;AACA,uBAAA,MADA;AAEA,oBAAA;AAFA,aAAA;;AAIA,kBAAA,MAAA;AACA,WANA,MAMA;AACA,kBAAA,QAAA,CAAA,KAAA,CAAA,MAAA;AACA;AACA,SAlBA,EAmBA,KAnBA,CAmBA,UAAA,GAAA,EAAA;AACA,kBAAA,KAAA,CAAA,GAAA;AACA,SArBA;AAsBA;AACA,KApDA;AAqDA,UArDA,kBAqDA,KArDA,EAqDA;AACA,WAAA,OAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA;AAvDA;AAXA,CAAA","sourcesContent":["<template>\r\n  <div class=\"dong_tai\">\r\n    <h3>发布动态</h3>\r\n    <el-input\r\n      type=\"textarea\"\r\n      maxlength=\"50\"\r\n      placeholder=\"请输入动态内容\"\r\n      v-model=\"textarea\"\r\n    >\r\n    </el-input>\r\n    <div class=\"dong_tai_imgList\">\r\n      <el-upload\r\n        class=\"avatar-uploader\"\r\n        action=\"http://localhost:81/upload/\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n      >\r\n        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n      </el-upload>\r\n      <div\r\n        v-for=\"(item, index) in imgList\"\r\n        :key=\"index\"\r\n        class=\"dong_tai_upload_imgList\"\r\n      >\r\n        <img :src=\"item\" alt=\"\" />\r\n        <i class=\"el-icon-close\" @click=\"delImg\"></i>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <span class=\"dong_tai_sight\"> 所在景点：</span>\r\n\r\n      <el-input\r\n        type=\"text\"\r\n        maxlength=\"10\"\r\n        v-model.trim=\"sight\"\r\n        style=\"width: 140px\"\r\n      ></el-input>\r\n    </div>\r\n    <div>\r\n      \r\n    </div>\r\n    <div>\r\n      <el-button type=\"success\" @click=\"send\">发送 </el-button>\r\n      <el-button type=\"info\" @click=\"cancel\">取消</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogImageUrl: \"\",\r\n      dialogVisible: false,\r\n      textarea: \"\",\r\n      imageUrl: \"\",\r\n      imgList: [],\r\n      sight: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    cancel() {\r\n      this.$parent.dongTaiShow = false;\r\n    },\r\n    handleAvatarSuccess(res, file) {\r\n      console.log(res);\r\n      this.imgList.push(res);\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === \"image/jpeg\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      if (this.imgList.length >= 4) {\r\n        console.log(\"sdsf\");\r\n        this.$message.error(\"上传图片数已达上限\");\r\n        return false;\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    send() {\r\n      if (this.textarea.length == 0) {\r\n        this.$message.error(\"标题不能为空呦\");\r\n      } else {\r\n        this.axios\r\n          .post(this.$root.dong_tai + \"dong/upload\", {\r\n            type: 0,\r\n            uId: parseInt(this.$cookies.get(\"uId\")),\r\n            title: this.textarea,\r\n            imgList: this.imgList,\r\n            sight: this.sight,\r\n          })\r\n          .then((res) => {\r\n            if (res.data) {\r\n              this.$message({\r\n                message: \"提交成功\",\r\n                type: \"success\",\r\n              });\r\n              this.cancel();\r\n            }else{\r\n              this.$message.error(\"提交错误\")\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.error(err);\r\n          });\r\n      }\r\n    },\r\n    delImg(index) {\r\n      this.imgList.splice(index, 1);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dong_tai_sight {\r\n  color: white;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  width: 148px;\r\n  height: 148px;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 148px;\r\n  height: 148px;\r\n  line-height: 148px !important;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 148px;\r\n  height: 148px;\r\n  display: block;\r\n}\r\n.dong_tai {\r\n  position: fixed;\r\n  width: 900px;\r\n  top: 26%;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background: rgba(0, 0, 0, 0.5);\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  border: 1px dashed whitesmoke;\r\n}\r\n.dong_tai > h3 {\r\n  color: white;\r\n}\r\n.dong_tai_upload_imgList {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n.dong_tai_upload_imgList > i {\r\n  position: absolute;\r\n  right: 4px;\r\n  top: 4px;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n.dong_tai_imgList {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  width: 100%;\r\n  max-width: 100%;\r\n}\r\n.dong_tai_imgList img {\r\n  width: 148px;\r\n  height: 148px;\r\n}\r\n</style>"],"sourceRoot":"src/components/DongTai"}]}