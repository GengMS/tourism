{"remainingRequest":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\babel-loader\\lib\\index.js!E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\设计案例\\tourism\\front-end\\front-end(web)\\src\\components\\Login\\UserLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\src\\components\\Login\\UserLogin.vue","mtime":1618189917758},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\.babelrc","mtime":1617256139254},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\设计案例\\tourism\\front-end\\front-end(web)\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport BasicContainer from \"@vue-materials/basic-container\";\n\nvar backgroundImage = require(\"../../assets/CoUBYGBii_CAZY8sACBYq-4zEog798.png\");\n\nexport default {\n  components: {\n    BasicContainer: BasicContainer\n  },\n  name: \"UserLogin\",\n  data: function data() {\n    return {\n      backgroundImage: backgroundImage,\n      user: {\n        username: \"\",\n        password: \"\"\n      }\n    };\n  },\n  created: function created() {},\n  methods: {\n    submitBtn: function submitBtn() {\n      var _this = this;\n\n      if (this.user.username.length == 0 || this.user.username.length == 0) {\n        this.$message.error(\"账号或密码不能为空\");\n        return;\n      }\n\n      this.axios.get(this.$root.loginUrl + \"login/\" + this.user.username + \"/\" + this.user.password).then(function (res) {\n        if (res.data.length == 0 || res.data == null) {\n          _this.$message.error(\"登录失败，账号或密码错误\");\n        } else {\n          console.log(res.data);\n\n          if (res.data.infor == 0) {\n            _this.$cookies.set(\"name\", res.data.email);\n\n            _this.$cookies.set(\"uId\", res.data.uId);\n\n            _this.$cookies.set(\"identity\", res.data.identity);\n\n            _this.$cookies.remove(\"imgUrl\");\n\n            _this.$cookies.remove(\"qian\");\n\n            _this.$cookies.set(\"infor\", 0);\n          } else {\n            _this.$cookies.set(\"uId\", res.data.uId);\n\n            _this.$cookies.set(\"identity\", res.data.identity);\n\n            _this.$cookies.set(\"infor\", 1);\n\n            _this.axios.post(_this.$root.loginUrl + \"getUserInfor/\" + res.data.uId).then(function (res) {\n              _this.$cookies.set(\"name\", res.data.name);\n\n              _this.$cookies.set(\"imgUrl\", res.data.imgUrl);\n\n              _this.$cookies.set(\"qian\", res.data.theSay);\n            }).catch(function (err) {\n              console.error(err);\n            });\n          }\n\n          _this.$message({\n            message: \"登录成功\",\n            type: \"success\"\n          });\n\n          setTimeout(function () {\n            _this.$router.push({\n              path: \"/\"\n            });\n          }, 1000);\n        }\n      }).catch(function (err) {\n        console.error(err);\n\n        _this.$message.error(\"登录失败，账号或密码错误\");\n      });\n    }\n  }\n};",{"version":3,"sources":["UserLogin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"user-login\">\n    <div\n      class=\"user-login-bg\"\n      :style=\"{ 'background-image': `url(${backgroundImage})` }\"\n    ></div>\n    <div class=\"content-wrapper\">\n      <h2 class=\"slogan\">\n        通了旅游 <br />\n        欢迎您\n      </h2>\n      <div class=\"form-container\">\n        <h4 class=\"form-title\">登录</h4>\n        <el-form ref=\"form\" :model=\"user\" label-width=\"0\">\n          <div class=\"form-items\">\n            <el-row class=\"form-item\">\n              <el-col>\n                <el-form-item\n                  prop=\"username\"\n                  :rules=\"[\n                    { required: true, message: '会员名/邮箱/手机号不能为空' },\n                  ]\"\n                >\n                  <div class=\"form-line\">\n                    <i class=\"el-icon-edit-outline input-icon\"></i>\n                    <el-input\n                      placeholder=\"邮箱\"\n                      v-model=\"user.username\"\n                    ></el-input>\n                  </div>\n                </el-form-item>\n              </el-col>\n            </el-row>\n            <el-row class=\"form-item\">\n              <el-col>\n                <el-form-item\n                  prop=\"password\"\n                  :rules=\"[{ required: true, message: '密码不能为空' }]\"\n                >\n                  <div class=\"form-line\">\n                    <i class=\"el-icon-service input-icon\"></i>\n                    <el-input\n                      type=\"password\"\n                      placeholder=\"密码\"\n                      v-model=\"user.password\"\n                    ></el-input>\n                  </div>\n                </el-form-item>\n              </el-col>\n            </el-row>\n\n            <el-row class=\"form-item\">\n              <el-button\n                type=\"primary\"\n                class=\"submit-btn\"\n                size=\"small\"\n                @click=\"submitBtn\"\n              >\n                登 录\n              </el-button>\n            </el-row>\n          </div>\n          <el-row class=\"tips\">\n            <router-link to=\"/registy\" tag=\"a\" class=\"link\"\n              >立即注册</router-link\n            >\n\n            <span class=\"line\">|</span>\n            <router-link to=\"/forgetPasswd\" tag=\"a\" class=\"link\"\n              >忘记密码</router-link\n            >\n          </el-row>\n        </el-form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BasicContainer from \"@vue-materials/basic-container\";\nconst backgroundImage = require(\"../../assets/CoUBYGBii_CAZY8sACBYq-4zEog798.png\");\nexport default {\n  components: { BasicContainer },\n  name: \"UserLogin\",\n\n  data() {\n    return {\n      backgroundImage: backgroundImage,\n      user: {\n        username: \"\",\n        password: \"\",\n      },\n    };\n  },\n\n  created() {},\n\n  methods: {\n    submitBtn() {\n      if (this.user.username.length == 0 || this.user.username.length == 0) {\n        this.$message.error(\"账号或密码不能为空\");\n        return;\n      }\n      this.axios\n        .get(\n          this.$root.loginUrl +\n            \"login/\" +\n            this.user.username +\n            \"/\" +\n            this.user.password\n        )\n        .then((res) => {\n          if (res.data.length == 0 || res.data == null) {\n            this.$message.error(\"登录失败，账号或密码错误\");\n          } else {\n            console.log(res.data);\n            if (res.data.infor == 0) {\n              this.$cookies.set(\"name\", res.data.email);\n              this.$cookies.set(\"uId\", res.data.uId);\n              this.$cookies.set(\"identity\", res.data.identity);\n              this.$cookies.remove(\"imgUrl\");\n              this.$cookies.remove(\"qian\");\n              this.$cookies.set(\"infor\", 0);\n            } else {\n              this.$cookies.set(\"uId\", res.data.uId);\n              this.$cookies.set(\"identity\", res.data.identity);\n              this.$cookies.set(\"infor\", 1);\n              this.axios\n                .post(this.$root.loginUrl + \"getUserInfor/\" + res.data.uId)\n                .then((res) => {\n                  this.$cookies.set(\"name\", res.data.name);\n                  this.$cookies.set(\"imgUrl\", res.data.imgUrl);\n                  this.$cookies.set(\"qian\", res.data.theSay);\n                })\n                .catch((err) => {\n                  console.error(err);\n                });\n            }\n\n            this.$message({\n              message: \"登录成功\",\n              type: \"success\",\n            });\n            setTimeout(() => {\n              this.$router.push({ path: \"/\" });\n            }, 1000);\n            \n          }\n        })\n        .catch((err) => {\n          console.error(err);\n          this.$message.error(\"登录失败，账号或密码错误\");\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./UserLogin.scss\";\n</style>\n"],"sourceRoot":"src/components/Login"}]}