(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ebb9e476"],{"022b":function(t,i,o){},"0f6f":function(t,i,o){"use strict";o("ef0e")},"363b":function(t,i,o){},"41f7":function(t,i,o){"use strict";var s=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"top"},[o("div",{staticClass:"top_container"},[o("div",{staticClass:"top_left"},[o("router-link",{attrs:{tag:"h2",to:"/"}},[t._v("通了旅游")]),o("h3",[o("router-link",{attrs:{tag:"a",to:"/tours"}},[t._v("跟团游")])],1),o("h3",[o("router-link",{attrs:{tag:"a",to:"/lvtu"}},[t._v("我的旅图")])],1),o("h3",[o("router-link",{attrs:{tag:"a",to:"/dongtai"}},[t._v("旅态")])],1)],1),o("div",{staticClass:"top_right"},[t.loginIsShow?t._e():o("div",{staticClass:"login_and_show"},[o("el-avatar",{attrs:{src:t.imgUrl}}),t._v(",\n        "+t._s(t.name)+"\n        "),o("div",[o("div",{on:{click:function(i){t.inforShow=!0}}},[t._v("修改信息")]),o("hr"),o("div",{on:{click:t.toLogin}},[t._v("退出")])])],1),o("infor",{directives:[{name:"show",rawName:"v-show",value:t.inforShow,expression:"inforShow"}],attrs:{name:t.name,imageUrl:t.imgUrl}}),t.loginIsShow?o("div",[o("router-link",{attrs:{tag:"span",to:"/registy"}},[t._v("注册")]),o("span",[t._v(" | ")]),o("router-link",{attrs:{tag:"span",to:"/login"}},[t._v("登录")])],1):t._e()],1)])])},n=[],e=o("b009"),a={components:{infor:e["a"]},data:function(){return{loginIsShow:!0,name:"",inforShow:!1,imgUrl:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}},mounted:function(){if(0==this.$cookies.get("uId").length||null==this.$cookies.get("uId"))this.loginIsShow=!0;else{var t=this;this.loginIsShow=!1,0==this.$cookies.get("infor")?this.name=this.$cookies.get("name"):(this.name=this.$cookies.get("name"),t.imgUrl=this.$cookies.get("imgUrl").replaceAll("^","/"),console.log(this.imgUrl))}},methods:{toLogin:function(){this.$router.push({path:"/login"})}}},r=a,c=(o("8761"),o("2877")),l=Object(c["a"])(r,s,n,!1,null,"54de3c6b",null);i["a"]=l.exports},4842:function(t,i,o){"use strict";o.r(i);var s=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"dongtai",style:{height:t.height}},[o("top"),o("div",{staticClass:"cotainer f2"},[o("div",{staticClass:"dongtai_left"},[o("h1",[t._v(t._s(t.title))]),t._l(t.dataList,(function(i,s){return o("div",{key:s},[o("div",{staticClass:"dong_imgUrl"},[o("img",{attrs:{src:i.imgUrl,alt:""}}),o("h3",[t._v(t._s(i.userName))])]),o("div",{staticClass:"dong_title"},[t._v("\n          "+t._s(t.giveTitle(s))+"\n        ")]),o("div",{staticClass:"dongtai_img_div"},t._l(i.content,(function(i,s){return"标题"!=i.type?o("img",{key:s,attrs:{src:i.content,alt:""}}):t._e()})),0),i.sight.length>0?o("div",{staticClass:"dong_tai_sight"},[o("i",{staticClass:"el-icon-location"},[t._v(t._s(i.sight))])]):t._e(),o("div",{staticClass:"dong_id"},[t._v("\n          动态id:"+t._s(i.dId)+"\n        ")]),o("div",{staticClass:"dong_tai_i"},[o("i",{directives:[{name:"show",rawName:"v-show",value:!i.goDot,expression:"!item.goDot"}],staticClass:"el-icon-thumb",on:{click:function(i){return t.increDot(s)}}},[t._v(t._s(i.dotCount))]),o("i",{directives:[{name:"show",rawName:"v-show",value:i.goDot,expression:"item.goDot"}],staticClass:"el-icon-thumb",staticStyle:{color:"orange"},on:{click:function(i){return t.dcrDot(s)}}},[t._v(t._s(i.dotCount))]),t._v("\n           \n          "),o("i",{staticClass:"el-icon-chat-line-round",on:{click:function(i){return t.goPage(s)}}},[t._v(t._s(i.commentsCount))])]),o("hr")])})),o("div",{staticClass:"dong_tran"},[o("div",{staticClass:"dong_pageion"},t._l(t.countDong,(function(i){return o("div",{key:i,class:[t.actIndex==i?"active":""],on:{click:function(o){return t.goOtherPage(i)}}},[t._v("\n            "+t._s(i)+"\n          ")])})),0)])],2),o("div",{staticClass:"dongtai_right"},[o("h2",[t._v("热门景点")]),o("hr"),o("div",{staticClass:"geng_card",style:{background:t.zuiBackImg},on:{click:t.goNEWst}},[t._v("\n        最新动态\n      ")]),t._l(t.sightsList,(function(i,s){return o("div",{key:s,staticClass:"geng_card",style:{background:t.backImgList[s]},on:{click:function(o){return t.tiao(i)}}},[t._v("\n        "+t._s(i)+"\n      ")])}))],2)]),o("div",{staticClass:"dongtaijia"},[o("div",[o("i",{staticClass:"el-icon-edit",on:{click:t.showDong}},[t._v("动态")])]),o("i",{staticClass:"el-icon-plus"})]),t.dongTaiShow?o("dongTai"):t._e()],1)},n=[],e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"dong_tai"},[o("h3",[t._v("发布动态")]),o("el-input",{attrs:{type:"textarea",maxlength:"50",placeholder:"请输入动态内容"},model:{value:t.textarea,callback:function(i){t.textarea=i},expression:"textarea"}}),o("div",{staticClass:"dong_tai_imgList"},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:81/upload/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?o("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._l(t.imgList,(function(i,s){return o("div",{key:s,staticClass:"dong_tai_upload_imgList"},[o("img",{attrs:{src:i,alt:""}}),o("i",{staticClass:"el-icon-close",on:{click:t.delImg}})])}))],2),o("div",[o("span",{staticClass:"dong_tai_sight"},[t._v(" 所在景点：")]),o("el-input",{staticStyle:{width:"140px"},attrs:{type:"text",maxlength:"10"},model:{value:t.sight,callback:function(i){t.sight="string"===typeof i?i.trim():i},expression:"sight"}})],1),o("div"),o("div",[o("el-button",{attrs:{type:"success"},on:{click:t.send}},[t._v("发送 ")]),o("el-button",{attrs:{type:"info"},on:{click:t.cancel}},[t._v("取消")])],1)],1)},a=[],r={data:function(){return{dialogImageUrl:"",dialogVisible:!1,textarea:"",imageUrl:"",imgList:[],sight:""}},methods:{cancel:function(){this.$parent.dongTaiShow=!1},handleAvatarSuccess:function(t,i){console.log(t),this.imgList.push(t)},beforeAvatarUpload:function(t){var i="image/jpeg"===t.type,o=t.size/1024/1024<2;return i||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imgList.length>=4?(console.log("sdsf"),this.$message.error("上传图片数已达上限"),!1):i&&o},send:function(){var t=this;0==this.textarea.length?this.$message.error("标题不能为空呦"):this.axios.post(this.$root.dong_tai+"dong/upload",{type:0,uId:parseInt(this.$cookies.get("uId")),title:this.textarea,imgList:this.imgList,sight:this.sight}).then((function(i){i.data?(t.$message({message:"提交成功",type:"success"}),t.cancel()):t.$message.error("提交错误")})).catch((function(t){console.error(t)}))},delImg:function(t){this.imgList.splice(t,1)}}},c=r,l=(o("dcaf"),o("2877")),h=Object(l["a"])(c,e,a,!1,null,"0b14547e",null),g=h.exports,u=o("41f7"),d={components:{top:u["a"],dongTai:g},data:function(){return{actIndex:1,title:"最新动态",height:"",zuiBackImg:"url("+o("e84f")+")",dongTaiShow:!1,dataList:[],dotShow:!0,sightsList:[],backImgList:["url("+o("d016")+")","url("+o("85b4")+")","url("+o("5637")+")"],countDong:0,biao:null}},methods:{getReMaxPage:function(){var t=this;this.axios.post(this.$root.dong_tai+"countDong/"+this.title).then((function(i){t.countDong=parseInt(i.data/10+1),console.log(t.countDong)})).catch((function(t){console.error(t)}))},showDong:function(){this.dongTaiShow=!0},goNEWst:function(){this.title="最新动态",this.biao=null,this.actIndex=1,this.flesh();var t=this;this.axios.post(this.$root.dong_tai+"countDong").then((function(i){t.countDong=Math.trunc(i.data/10)+1,console.log(t.countDong)})).catch((function(t){console.error(t)}))},goOtherPage:function(t){var i=this;this.actIndex=t,null!=this.biao?this.axios.post(this.$root.dong_tai+"listDongBySight/"+this.$cookies.get("uId")+"/"+this.biao+"/"+this.actIndex).then((function(t){i.dataList=t.data,i.dataList.forEach((function(t){t.content.forEach((function(t){"图片"==t.type&&t.content.replaceAll("^","/")}))})),i.dataList.forEach((function(t){t.imgUrl=t.imgUrl.replaceAll("^","/")}))})):this.flesh()},tiao:function(t){var i=this;this.title=t,this.actIndex=1,this.axios.post(this.$root.dong_tai+"listDongBySight/"+this.$cookies.get("uId")+"/"+t+"/"+this.actIndex).then((function(o){i.biao=t,i.dataList=o.data,i.dataList.forEach((function(t){t.content.forEach((function(t){"图片"==t.type&&t.content.replaceAll("^","/")}))})),i.dataList.forEach((function(t){t.imgUrl=t.imgUrl.replaceAll("^","/")})),i.getReMaxPage()})).catch((function(t){console.error(t)}))},giveTitle:function(t){for(var i=0;i<this.dataList[t].content.length;i++)if("标题"==this.dataList[t].content[i].type){var o=this.dataList[t].content[i].content;return o}},increDot:function(t){var i=this;this.axios.post(this.$root.dong_tai+"/increDot/"+this.dataList[t].dId+"/"+this.$cookies.get("uId")).then((function(o){o.data&&(i.dataList[t].dotCount++,i.dataList[t].goDot=!0)})).catch((function(t){console.error(t)}))},dcrDot:function(t){var i=this;this.axios.post(this.$root.dong_tai+"/decDot/"+this.dataList[t].dId+"/"+this.$cookies.get("uId")).then((function(o){o.data&&(i.dataList[t].dotCount--,i.dataList[t].goDot=!1)})).catch((function(t){console.error(t)}))},goPage:function(t){var i=JSON.stringify(this.dataList[t]);this.$router.push({path:"/dongtaiPage",query:{artcle:i}})},flesh:function(){var t=this;this.axios.post(this.$root.dong_tai+"dong/listDong/"+this.$cookies.get("uId")+"/"+this.actIndex).then((function(i){t.dataList=i.data,t.dataList.forEach((function(t){t.content.forEach((function(t){"图片"==t.type&&t.content.replaceAll("^","/")}))})),t.dataList.forEach((function(t){t.imgUrl=t.imgUrl.replaceAll("^","/")}))})).catch((function(t){console.error(t)}))}},beforeMount:function(){var t=this;this.axios.post(this.$root.dong_tai+"sights").then((function(i){t.sightsList=i.data;var o=t;t.axios.post(t.$root.dong_tai+"countDong").then((function(t){o.countDong=Math.trunc(t.data/10)+1,console.log(o.countDong)})).catch((function(t){console.error(t)}))})).catch((function(t){console.error(t)}))},mounted:function(){var t=document.documentElement.clientHeight;this.height=t+"px",this.flesh()}},f=d,m=(o("dff8"),Object(l["a"])(f,s,n,!1,null,"c120fb94",null));i["default"]=m.exports},5637:function(t,i,o){t.exports=o.p+"img/re1.50366eb2.jpeg"},"85b4":function(t,i,o){t.exports=o.p+"img/re2.0f9be1d1.jpeg"},8761:function(t,i,o){"use strict";o("022b")},"97e9":function(t,i,o){},b009:function(t,i,o){"use strict";var s=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"infor"},[o("div",{staticClass:"infor_f1"},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:81/upload/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?o("img",{staticClass:"avatar",attrs:{src:t.infor.imgUrl}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),o("div",[o("el-input",{attrs:{type:"text",maxlength:"10"},model:{value:t.infor.name,callback:function(i){t.$set(t.infor,"name",i)},expression:"infor.name"}})],1)],1),o("div",[o("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"我的签名",minlength:"4",maxlength:"50"},model:{value:t.infor.theSay,callback:function(i){t.$set(t.infor,"theSay",i)},expression:"infor.theSay"}})],1),o("div",[o("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){return t.send()}}},[t._v(" 修改 ")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.show}},[t._v("取消")])],1)])},n=[],e={name:"infor",props:["imageUrl","name"],data:function(){return{infor:{uId:"",theSay:"",imgUrl:"",name:""}}},methods:{send:function(){var t=this;if(this.infor.name.length<4)this.$message.error("名字长度不能少于4位");else if(this.infor.name.match("[//,?]"))this.$message.error("名字中不能包含特殊字符（/,?）");else{this.infor.uId=this.$cookies.get("uId");var i=this.infor.imgUrl;this.infor.imgUrl=this.infor.imgUrl.replaceAll("/","^");var o=JSON.stringify(this.infor),s=this;this.axios.post(this.$root.loginUrl+"updateUserInfor/"+o).then((function(o){console.log(o),o.data?(t.$cookies.set("name",s.infor.name),t.$cookies.set("imgUrl",i),t.$cookies.set("infor",1),t.$cookies.set("qian",t.infor.theSay),t.$parent.imgUrl=i,t.$parent.name=s.infor.name,t.$message({message:"修改 成功",type:"success"}),t.$parent.inforShow=!1):t.$message.error("修改失败")})).catch((function(i){s.infor.imgUrl=t.$cookies.get("imgUrl").replaceAll("%","/"),t.$message.error("修改失败"),console.error(i)}))}},show:function(){this.$parent.inforShow=!1},handleAvatarSuccess:function(t,i){console.log(t),this.infor.imgUrl=t},beforeAvatarUpload:function(t){var i="image/jpeg"===t.type,o=t.size/1024/1024<2;return i||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&o}},mounted:function(){this.$cookies.isKey("qian")&&(this.infor.theSay=this.$cookies.get("qian")),this.$cookies.isKey("imgUrl")?this.infor.imgUrl=this.$cookies.get("imgUrl").replaceAll("^","/"):this.infor.imgUrl=this.imageUrl,this.$cookies.isKey("name")&&(this.infor.name=this.$cookies.get("name"))}},a=e,r=(o("0f6f"),o("2877")),c=Object(r["a"])(a,s,n,!1,null,null,null);i["a"]=c.exports},d016:function(t,i,o){t.exports=o.p+"img/re3.0fe1154e.jpeg"},dcaf:function(t,i,o){"use strict";o("97e9")},dff8:function(t,i,o){"use strict";o("363b")},e84f:function(t,i,o){t.exports=o.p+"img/CoUBYGBkI-uAbH2oAC9KSsmQjNE706.0cd04777.png"},ef0e:function(t,i,o){}}]);
//# sourceMappingURL=chunk-ebb9e476.cf4dd604.js.map