(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-caa6518e"],{"022b":function(t,i,e){},"0f6f":function(t,i,e){"use strict";e("ef0e")},"2e4f":function(t,i,e){"use strict";e("c80b")},"41f7":function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"top"},[e("div",{staticClass:"top_container"},[e("div",{staticClass:"top_left"},[e("router-link",{attrs:{tag:"h2",to:"/"}},[t._v("通了旅游")]),e("h3",[e("router-link",{attrs:{tag:"a",to:"/tours"}},[t._v("跟团游")])],1),e("h3",[e("router-link",{attrs:{tag:"a",to:"/lvtu"}},[t._v("我的旅图")])],1),e("h3",[e("router-link",{attrs:{tag:"a",to:"/dongtai"}},[t._v("旅态")])],1)],1),e("div",{staticClass:"top_right"},[t.loginIsShow?t._e():e("div",{staticClass:"login_and_show"},[e("el-avatar",{attrs:{src:t.imgUrl}}),t._v(",\n        "+t._s(t.name)+"\n        "),e("div",[e("div",{on:{click:function(i){t.inforShow=!0}}},[t._v("修改信息")]),e("hr"),e("div",{on:{click:t.toLogin}},[t._v("退出")])])],1),e("infor",{directives:[{name:"show",rawName:"v-show",value:t.inforShow,expression:"inforShow"}],attrs:{name:t.name,imageUrl:t.imgUrl}}),t.loginIsShow?e("div",[e("router-link",{attrs:{tag:"span",to:"/registy"}},[t._v("注册")]),e("span",[t._v(" | ")]),e("router-link",{attrs:{tag:"span",to:"/login"}},[t._v("登录")])],1):t._e()],1)])])},o=[],a=e("b009"),n={components:{infor:a["a"]},data:function(){return{loginIsShow:!0,name:"",inforShow:!1,imgUrl:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}},mounted:function(){if(0==this.$cookies.get("uId").length||null==this.$cookies.get("uId"))this.loginIsShow=!0;else{var t=this;this.loginIsShow=!1,0==this.$cookies.get("infor")?this.name=this.$cookies.get("name"):(this.name=this.$cookies.get("name"),t.imgUrl=this.$cookies.get("imgUrl").replaceAll("^","/"),console.log(this.imgUrl))}},methods:{toLogin:function(){this.$router.push({path:"/login"})}}},r=n,l=(e("8761"),e("2877")),c=Object(l["a"])(r,s,o,!1,null,"54de3c6b",null);i["a"]=c.exports},8761:function(t,i,e){"use strict";e("022b")},b009:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"infor"},[e("div",{staticClass:"infor_f1"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:81/upload/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?e("img",{staticClass:"avatar",attrs:{src:t.infor.imgUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("div",[e("el-input",{attrs:{type:"text",maxlength:"10"},model:{value:t.infor.name,callback:function(i){t.$set(t.infor,"name",i)},expression:"infor.name"}})],1)],1),e("div",[e("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"我的签名",minlength:"4",maxlength:"50"},model:{value:t.infor.theSay,callback:function(i){t.$set(t.infor,"theSay",i)},expression:"infor.theSay"}})],1),e("div",[e("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){return t.send()}}},[t._v(" 修改 ")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.show}},[t._v("取消")])],1)])},o=[],a={name:"infor",props:["imageUrl","name"],data:function(){return{infor:{uId:"",theSay:"",imgUrl:"",name:""}}},methods:{send:function(){var t=this;if(this.infor.name.length<4)this.$message.error("名字长度不能少于4位");else if(this.infor.name.match("[//,?]"))this.$message.error("名字中不能包含特殊字符（/,?）");else{this.infor.uId=this.$cookies.get("uId");var i=this.infor.imgUrl;this.infor.imgUrl=this.infor.imgUrl.replaceAll("/","^");var e=JSON.stringify(this.infor),s=this;this.axios.post(this.$root.loginUrl+"updateUserInfor/"+e).then((function(e){console.log(e),e.data?(t.$cookies.set("name",s.infor.name),t.$cookies.set("imgUrl",i),t.$cookies.set("infor",1),t.$cookies.set("qian",t.infor.theSay),t.$parent.imgUrl=i,t.$parent.name=s.infor.name,t.$message({message:"修改 成功",type:"success"}),t.$parent.inforShow=!1):t.$message.error("修改失败")})).catch((function(i){s.infor.imgUrl=t.$cookies.get("imgUrl").replaceAll("%","/"),t.$message.error("修改失败"),console.error(i)}))}},show:function(){this.$parent.inforShow=!1},handleAvatarSuccess:function(t,i){console.log(t),this.infor.imgUrl=t},beforeAvatarUpload:function(t){var i="image/jpeg"===t.type,e=t.size/1024/1024<2;return i||this.$message.error("上传头像图片只能是 JPG 格式!"),e||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&e}},mounted:function(){this.$cookies.isKey("qian")&&(this.infor.theSay=this.$cookies.get("qian")),this.$cookies.isKey("imgUrl")?this.infor.imgUrl=this.$cookies.get("imgUrl").replaceAll("^","/"):this.infor.imgUrl=this.imageUrl,this.$cookies.isKey("name")&&(this.infor.name=this.$cookies.get("name"))}},n=a,r=(e("0f6f"),e("2877")),l=Object(r["a"])(n,s,o,!1,null,null,null);i["a"]=l.exports},c80b:function(t,i,e){},e080:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("top"),e("div",{staticClass:"lvtu",style:{height:t.height}},[e("div",{staticClass:"lvtu_left"},[e("div",{staticClass:"lvtu_left_logo"},[t._v("旅图")]),e("div",{staticClass:"lvtu_upload"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:81/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imgUrl?e("img",{staticClass:"avatar",attrs:{src:t.imgUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e("h5",[t._v("上传我的图片")])])],1),e("div",{staticClass:"lvtu_left_bottom"},[e("a",{staticClass:"go_show",attrs:{tag:"a"},on:{click:t.tiao}},[t._v("查看我的图片墙\n          "),e("br"),e("span",[t._v("可以把你的图片墙链接分享给你的好友呦")])])])]),e("div",{staticClass:"lvtu_right"},t._l(t.imgList,(function(i,s){return e("div",{key:s},[e("h3",[t._v(t._s(s))]),e("div",{staticClass:"lv_tu_imgList"},t._l(i,(function(i,s){return e("div",{key:s},[e("i",{staticClass:"el-icon-close",on:{click:function(e){return t.delImg(i.i_id)}}}),e("vue-viewer",{attrs:{thumb:i.img_url.replaceAll("^","/"),full:i.img_url.replaceAll("^","/")}})],1)})),0),e("hr")])})),0)])],1)},o=[],a=e("41f7"),n={components:{top:a["a"]},data:function(){return{imgUrl:"",height:"",imgList:"",imgListKeys:""}},beforeMount:function(){var t=document.documentElement.clientHeight-80;this.height=t+"px"},mounted:function(){this.search()},methods:{tiao:function(){this.$router.push({path:"/show/".concat(this.$cookies.get("uId"))})},delImg:function(t){var i=this;this.axios.post(this.$root.lv_tu+"delImg/"+t).then((function(t){t.data&&i.search()})).catch((function(t){console.error(t)}))},search:function(){var t=this;this.axios.post(this.$root.lv_tu+"listImgByDate/"+this.$cookies.get("uId")).then((function(i){console.log(i.data),t.imgList=i.data,t.imgListKeys=Object.keys(i.data),console.log(t.imgListKeys)})).catch((function(t){console.error(t)}))},handleAvatarSuccess:function(t,i){var e=this;this.imgUrl=t;var s=t.replaceAll("/","^");this.axios.post(this.$root.lv_tu+"saveImg/"+s+"/"+this.$cookies.get("uId")).then((function(t){e.search(),console.log(t.data)})).catch((function(t){console.error(t)}))},beforeAvatarUpload:function(t){var i="image/jpeg"===t.type,e=t.size/1024/1024<2;return i||this.$message.error("上传头像图片只能是 JPG 格式!"),e||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&e}}},r=n,l=(e("2e4f"),e("2877")),c=Object(l["a"])(r,s,o,!1,null,null,null);i["default"]=c.exports},ef0e:function(t,i,e){}}]);
//# sourceMappingURL=chunk-caa6518e.aabd7839.js.map